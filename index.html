<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>cote.my — redirector</title>
  <style>
    :root{--bg:#fff;--fg:#111;--muted:#666}
    html,body{height:100%}
    body{margin:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#f8fafc,#fff);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--fg)}
    .card{max-width:720px;padding:28px;border-radius:12px;box-shadow:0 6px 24px rgba(16,24,40,.08);background:rgba(255,255,255,.9);text-align:center}
    h1{margin:0 0 8px;font-size:18px}
    p{margin:0 0 14px;color:var(--muted)}
    .link{word-break:break-all;background:#f3f4f6;padding:10px;border-radius:8px;margin:12px 0}
    a.button{display:inline-block;padding:10px 16px;border-radius:9px;background:#0b69ff;color:#fff;text-decoration:none}
    small{display:block;margin-top:10px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="card" id="card">
    <h1 id="title">Redirecting…</h1>
    <p id="desc">Preparing clean Instagram link for you.</p>

    <div id="linkbox" class="link" style="display:none"></div>
    <a id="manual" class="button" href="#" style="display:none">Go to destination</a>
    <small id="note">If you are not redirected automatically, click the button above.</small>
  </div>

<script>
(function(){
  // Grab only the path (no query, no hash)
  const rawPath = window.location.pathname || '/';
  // Normalize: remove repeated slashes
  const path = rawPath.replace(/\/+/g,'/').replace(/^\/|\/$/g, s=>s ? s : ''); // keep inner segments
  // If root or empty, show info page
  if (!path || path === '') {
    document.getElementById('title').innerText = 'cote.my — Instagram shortener';
    document.getElementById('desc').innerText = 'Usage examples: /reel/<id>/ , /p/<id>/ , /user/<username>/';
    document.getElementById('note').innerText = 'Place this file as a catch-all on your domain. Any path will be redirected to instagram.com/<path>';
    return;
  }

  // Build target Instagram URL (always force https + www.instagram.com)
  // Ensure the path starts and ends properly: instagram typically expects a trailing slash for many endpoints.
  const normalized = path.replace(/^\/+|\/+$/g, ''); // remove leading/trailing slashes
  const target = `https://www.instagram.com/${normalized}/`;

  // Show link for manual click in case JS redirect blocked
  const linkbox = document.getElementById('linkbox');
  linkbox.style.display = 'block';
  linkbox.textContent = target;

  const manual = document.getElementById('manual');
  manual.href = target;
  manual.style.display = 'inline-block';

  // perform immediate redirect (replace so it doesn't stay in history)
  // small timeout to let UI update (and to satisfy some browsers)
  setTimeout(() => {
    try {
      window.location.replace(target);
    } catch (e) {
      // fallback: set href so user can click
      manual.style.display = 'inline-block';
    }
  }, 80);
})();
</script>
</body>
</html>
