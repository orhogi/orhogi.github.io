<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Redirecting...</title>
  
  <!-- CRUCIAL FOR SPEED: Meta refresh fallback for instant redirect -->
  <meta http-equiv="refresh" content="0; url=about:blank" id="meta-redirect-tag">

  <!-- CRUCIAL FOR EMBEDS: Open Graph tags for social previews -->
  <meta property="og:title" content="Loading Instagram link..." id="og-title">
  <meta property="og:description" content="Click here to view the content on Instagram." id="og-description">
  <meta property="og:url" content="" id="og-url">
  <!-- Instagram favicon for a professional-looking embed icon -->
  <meta property="og:image" content="https://www.instagram.com/static/images/ico/favicon-192.png/68d99ba29cc8.png">
  <meta property="og:type" content="website">

</head>
<!-- 
  CRUCIAL FOR INVISIBILITY: The inline style "display: none;" 
  prevents the browser from rendering the body content even for a millisecond, 
  ensuring no redirect message is ever seen.
-->
<body style="display: none;">

<script>
(function(){
  const metaRedirectTag = document.getElementById('meta-redirect-tag');
  const ogTitleEl = document.getElementById('og-title');
  const ogDescEl = document.getElementById('og-description');
  const ogUrlEl = document.getElementById('og-url');

  // --- Path Normalization and Cleaning ---
  // Gets the path part of the URL (e.g., /stories/theraputic.panda/37519...)
  const rawPath = window.location.pathname; 
  
  // Normalizes the path: removes multiple slashes and leading/trailing slashes.
  const path = rawPath
    .replace(/\/+/g, '/') 
    .replace(/^\/|\/$/g, ''); 

  // --- 1. Root Check ---
  // If path is empty (root URL), we stop processing and do not redirect.
  if (!path || path === '') {
    // If you need an info page at the root, you must use a separate index.html
    metaRedirectTag.remove(); 
    return;
  }

  // --- 2. Build CLEAN Target URL (No Tracking) ---
  // We explicitly IGNORE window.location.search to strip all ?tracking parameters.
  const target = `https://www.instagram.com/${path}/`;

  // --- 3. Dynamic Embed/Preview Update (For Social Apps) ---
  const contentType = path.split('/')[0];
  const title = 'Instagram Content: ' + contentType.charAt(0).toUpperCase() + contentType.slice(1);

  ogTitleEl.setAttribute('content', title);
  ogDescEl.setAttribute('content', 'View the content directly on Instagram. Tap to view.');
  ogUrlEl.setAttribute('content', target);


  // --- 4. Set Meta Refresh for Instant Redirect (Non-JS fallback) ---
  // This takes effect immediately upon parsing the <head> tag.
  metaRedirectTag.setAttribute('content', `0; url=${target}`);

  // --- 5. Perform Automatic JS Redirect (Clean History) ---
  // Runs immediately to ensure history is clean using window.location.replace.
  setTimeout(() => {
    try {
      window.location.replace(target);
    } catch (e) {
      // If JS fails, the meta refresh takes over, so no error handling needed here.
    }
  }, 0); 
})();
</script>
</body>
</html>
